resources:
  jobs:
    komae_demand_forecasting_wf:
      name: komae_demand_forecasting_wf
      tasks:
      - task_key: config
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/00_config
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      - task_key: load_data
        depends_on:
        - task_key: config
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/01_load_data
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      - task_key: prep_raw_csv
        depends_on:
        - task_key: load_data
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/02_prep_raw_csv
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      - task_key: ETL
        depends_on:
        - task_key: prep_raw_csv
        pipeline_task:
          pipeline_id: b2e1355c-1719-4f31-bcae-aa81fba099d4
          full_refresh: false
      - task_key: ETL_for_ai_query
        depends_on:
        - task_key: ETL
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/07_ETL_for_ai_query
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      - task_key: AutoML
        depends_on:
        - task_key: ETL_for_ai_query
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/06_AutoML
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      - task_key: model_serving
        depends_on:
        - task_key: AutoML
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/09_model_serving
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      - task_key: model_train_and_predict
        depends_on:
        - task_key: ETL
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/05_model_training
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      - task_key: ETL_for_dashboard
        depends_on:
        - task_key: model_train_and_predict
        notebook_task:
          notebook_path: /Workspace/Users/konomi.omae@databricks.com/demos/20250511_demand_forecast/komae_dbdemos/demand_forcast_20250426/10_ETL_for_dashboard
          source: WORKSPACE
        existing_cluster_id: 0203-124810-rmnsgflh
      queue:
        enabled: true
